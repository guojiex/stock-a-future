# A股股票买卖点预测程序开发提纲

## 一、程序整体架构（模块划分）

### 1. 数据层模块
- **数据获取子模块**  
  - 对接免费数据源（如Tushare、AkShare、baostock）  
  - 支持本地历史数据缓存（CSV/数据库存储）  
  - 实时数据更新接口（可选）  

- **数据预处理子模块**  
  - 缺失值处理（插值/删除）  
  - 异常值清洗（如股价异动过滤）  
  - 时间序列标准化（归一化/标准化）  
  - 数据格式转换（K线周期转换：日线→小时线/分钟线）  

### 2. 特征工程模块
- **技术指标计算子模块**  
  - 自动计算各类指标（见下文“核心指标”）  
  - 指标组合生成（如多指标交叉信号）  

- **特征选择子模块**  
  - 过滤冗余特征（相关性分析）  
  - 特征重要性评估（用于模型输入优化）  

### 3. 预测模型模块
- **模型训练子模块**  
  - 训练集/验证集/测试集划分（时间序列交叉验证）  
  - 超参数调优（网格搜索/贝叶斯优化）  
  - 模型保存与加载  

- **买卖点预测子模块**  
  - 局部极值（高低点）识别算法  
  - 预测结果概率输出（胜率计算）  

### 4. 策略回测模块
- **历史回测引擎**  
  - 模拟交易执行（买入/卖出信号触发）  
  - 收益计算（年化收益率、夏普比率等）  
  - 风险指标统计（最大回撤、波动率）  

- **胜率验证子模块**  
  - 预测结果与实际高低点匹配度计算  
  - 不同市场环境下的胜率分析（牛市/熊市/震荡市）  

### 5. 可视化与交互模块
- 预测结果可视化（K线图叠加买卖点标记）  
- 策略绩效图表（收益曲线、胜率分布）  
- 参数调整界面（可选，用于动态优化）  


## 二、核心预测策略

### 1. 技术分析策略（基于指标信号）
- **趋势跟踪策略**  
  - 金叉/死叉信号（如MACD、均线交叉）  
  - 突破策略（价格突破布林带上下轨、前高前低）  

- **反转策略**  
  - 超买超卖信号（RSI>70视为超买，RSI<30视为超卖）  
  - 背离信号（价格与指标背离，如MACD顶背离/底背离）  

- **波动策略**  
  - 基于ATR（平均真实波幅）的波动区间预测  
  - 高低点周期规律（如斐波那契时间窗口）  

### 2. 机器学习/深度学习策略
- **分类任务**：将“买入/卖出/持有”视为分类问题  
  - 输入：技术指标+量能特征  
  - 输出：未来N天内出现局部高低点的概率  

- **回归任务**：直接预测价格拐点时间  
  - 输入：历史价格序列+市场情绪特征  
  - 输出：未来价格走势的局部极值点坐标  

- **时间序列预测**：基于序列模式识别高低点  
  - 如LSTM捕捉价格序列的长期依赖关系  
  - Transformer模型处理多时间尺度特征  


## 三、关键关注指标

### 1. 价格与成交量指标
- 基础K线数据：开盘价、收盘价、最高价、最低价、成交量  
- 量价关系指标：量比、换手率、成交量加权平均价（VWAP）  

### 2. 趋势指标
- 均线系统：MA5/MA10/MA20（短期）、MA60/MA120（中长期）  
- 趋势强度：ADX（平均趋向指标）、DMI（方向指标）  

### 3. 动量与反转指标
- RSI（相对强弱指数）：衡量超买超卖  
- MACD（指数平滑异同平均线）：捕捉趋势转折  
- KDJ（随机指标）：短期价格波动信号  

### 4. 波动率指标
- 布林带（BOLL）：价格波动区间  
- ATR（平均真实波幅）：市场波动强度  
- 波动率指数（如自行计算的价格标准差）  

### 5. 资金流向指标
- 大单净流入/流出  
- 主力资金持仓变化（需数据源支持）  


## 四、推荐算法

### 1. 传统算法（适合入门）
- **滑动窗口极值检测**：基于局部窗口内的价格极值识别高低点（简单但实用）  
- **决策树/随机森林**：处理非线性特征，输出买卖点概率（解释性强）  
- **SVM（支持向量机）**：适合小样本数据的分类任务  

### 2. 进阶算法（适合复杂场景）
- **LSTM/GRU**：处理时间序列数据，捕捉价格走势的时序依赖  
- **XGBoost/LightGBM**：梯度提升树，适合特征维度高的场景，可输出预测概率  
- **强化学习（如DQN）**：通过与市场环境交互优化买卖策略，动态调整决策  

### 3. 胜率计算方法
- 混淆矩阵：统计“预测正确的买卖点”占总预测次数的比例  
- 时间窗口匹配：允许预测点与实际高低点存在±N天的误差（更贴合实际交易）  
- 贝叶斯概率修正：结合先验胜率与实时市场数据动态更新可信度  


## 五、开发注意事项
1. **过拟合风险**：避免为历史数据“量身定制”策略，需通过多时段验证  
2. **市场有效性**：A股存在政策干预、流动性变化等因素，需加入鲁棒性处理  
3. **实盘差距**：回测收益≠实盘收益，需考虑滑点、手续费、流动性限制  
4. **动态优化**：市场风格切换时（如从价值股转向成长股），模型需定期重训