# 预测结果字段解释

## 概述

本文档详细解释了股票预测系统中各个字段的含义、计算逻辑和显示规则。

## 字段说明

### 1. 买卖信号类型 (Type)
- **BUY**: 买入信号，表示建议买入该股票
- **SELL**: 卖出信号，表示建议卖出该股票
- **HOLD**: 持有信号，表示建议继续持有，不进行买卖操作

### 2. 预测价格 (Price)
- **含义**: 预测的目标价格，通常基于当前价格和技术分析
- **单位**: 人民币元 (¥)
- **计算**: 基于当前收盘价和预测方向调整

### 3. 预测概率 (Probability)
- **含义**: 预测成功的概率，范围0-1，转换为百分比显示
- **计算逻辑**:
  - **基础概率**: 每种技术模式都有预设的基础概率
    - 双响炮: 75%
    - 红三兵: 70%
    - 乌云盖顶: 65%
    - 锤子线: 60%
    - 启明星: 70%
    - 黄昏星: 65%
    - 量价齐升: 65%
    - 量价背离: 60%
    - 放量突破: 70%
  
  - **置信度调整**: 根据识别到的置信度进行调整
    - 图形模式: 置信度 × 0.2
    - 量价模式: 置信度 × 0.15
  
  - **上限控制**:
    - 图形模式: 最大95%
    - 量价模式: 最大90%

### 4. 预测依据 (Reason)
- **格式**: `识别到{模式名称}模式，置信度：{置信度值}，强度：{强度等级}`
- **示例**: `识别到双响炮模式，置信度：45.24，强度：WEAK`

### 5. 置信度 (Confidence)
- **含义**: 技术模式识别的可信程度
- **取值范围**: 0-100%
- **计算方式**: 加权计算
  - 价格变化权重: 40%
  - 成交量变化权重: 30%
  - 量比权重: 30%

### 6. 强度等级 (Strength)
- **STRONG**: 强信号，置信度 ≥ 80%
- **MEDIUM**: 中等信号，置信度 ≥ 60%
- **WEAK**: 弱信号，置信度 < 60%

### 7. 信号日期 (Signal Date)
- **含义**: 识别到技术模式的交易日期
- **格式**: YYYY-MM-DD
- **用途**: 追踪信号产生的时间点

## 置信度计算详解

### 价格变化权重 (40%)
```
价格置信度 = min(价格变化百分比, 10%) × 4
```
- 当价格变化超过10%时，按10%计算
- 最大贡献40分

### 成交量变化权重 (30%)
```
成交量置信度 = min(成交量变化百分比, 50%) × 0.6
```
- 当成交量变化超过50%时，按50%计算
- 最大贡献30分

### 量比权重 (30%)
```
量比置信度 = min(量比, 5) × 6
```
- 当量比超过5倍时，按5倍计算
- 最大贡献30分

### 最终置信度
```
总置信度 = 价格置信度 + 成交量置信度 + 量比置信度
```
- 限制最大值不超过100%

## 显示规则

### 强度显示
- **所有模式**现在都会显示强度等级
- **统一格式**: 置信度 + 强度等级
- **示例**: `置信度：45.24，强度：WEAK`

### 信号排序
- **排序规则**: 系统会自动对预测信号进行排序，优先级如下：
  1. **强度等级**: STRONG > MEDIUM > WEAK
  2. **置信度**: 高到低
  3. **概率**: 高到低
- **排序目的**: 让用户优先看到最可靠的信号
- **示例排序**:
  ```
  1. 双响炮模式，置信度：85.5，强度：STRONG，概率：92.1%
  2. 红三兵模式，置信度：78.2，强度：STRONG，概率：90.6%
  3. 放量突破模式，置信度：72.1，强度：MEDIUM，概率：88.3%
  4. 量价齐升模式，置信度：65.8，强度：MEDIUM，概率：84.9%
  5. 锤子线模式，置信度：45.2，强度：WEAK，概率：78.0%
  ```

### 提示图标
- 每个字段右侧都有ℹ️图标
- 鼠标悬停显示详细解释
- 帮助用户理解各个字段的含义

## 常见问题

### Q: 为什么概率会超过基础概率？
A: 概率会根据置信度进行调整，高置信度的模式会获得额外的概率加成。

### Q: 置信度和概率有什么区别？
A: 置信度反映技术模式识别的准确性，概率反映预测成功的可能性。两者相关但不完全相同。

### Q: 强度等级如何影响交易决策？
A: 强度等级越高，信号越可靠，但最终决策还应结合其他因素综合考虑。

## 技术实现

### 后端修改
- 统一了所有模式的reason字段格式
- 确保所有模式都包含强度信息

### 前端增强
- 添加了提示图标和悬停效果
- 改进了字段布局和显示效果
- 提供了详细的字段解释

## 更新日志

- **2024-12-19**: 统一强度显示格式，添加前端提示功能
- **2024-12-19**: 完善置信度计算逻辑文档
- **2024-12-19**: 添加字段解释和常见问题解答
