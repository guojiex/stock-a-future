# 技术指标说明文档

## 概述

Stock-A-Future 系统集成了丰富的技术指标分析功能，为股票投资决策提供全面的技术分析支持。系统支持传统技术指标计算、图形模式识别以及基于这些指标的智能预测功能。

## 支持的技术指标

### 1. 移动平均线 (Moving Average - MA)

移动平均线是最基础也是最重要的技术指标之一，用于平滑价格波动，识别趋势方向。

**支持的周期：**
- MA5：5日移动平均线
- MA10：10日移动平均线  
- MA20：20日移动平均线
- MA60：60日移动平均线
- MA120：120日移动平均线

**计算方法：**
```
MA(n) = (P1 + P2 + ... + Pn) / n
```
其中 P 为收盘价，n 为周期

**应用场景：**
- 判断股价趋势方向
- 寻找支撑和阻力位
- 金叉死叉信号识别

### 2. MACD指标 (Moving Average Convergence Divergence)

MACD是一个趋势跟踪动量指标，通过计算两条不同速度的指数移动平均线的差值来分析股价走势。

**组成部分：**
- **DIF线**：12日EMA - 26日EMA
- **DEA线**：DIF的9日EMA（信号线）
- **MACD柱状图**：(DIF - DEA) × 2

**信号识别：**
- **金叉**：MACD由负转正，买入信号
- **死叉**：MACD由正转负，卖出信号

**计算公式：**
```
EMA(12) = 前一日EMA(12) × 11/13 + 今日收盘价 × 2/13
EMA(26) = 前一日EMA(26) × 25/27 + 今日收盘价 × 2/27
DIF = EMA(12) - EMA(26)
DEA = 前一日DEA × 8/10 + 今日DIF × 2/10
MACD = (DIF - DEA) × 2
```

### 3. RSI指标 (Relative Strength Index)

RSI是一个动量振荡器，用于测量价格变动的速度和幅度，识别超买超卖状态。

**参数设置：**
- 默认周期：14日
- 取值范围：0-100

**信号判断：**
- RSI > 70：超买状态，可能出现回调
- RSI < 30：超卖状态，可能出现反弹
- RSI = 50：多空平衡点

**计算公式：**
```
RS = 平均上涨幅度 / 平均下跌幅度
RSI = 100 - (100 / (1 + RS))
```

### 4. 布林带 (Bollinger Bands - BOLL)

布林带是一个波动率指标，由三条线组成，用于判断价格的相对高低位置。

**组成部分：**
- **中轨**：20日移动平均线
- **上轨**：中轨 + 2倍标准差
- **下轨**：中轨 - 2倍标准差

**信号识别：**
- 价格触及上轨：可能超买，关注卖出机会
- 价格触及下轨：可能超卖，关注买入机会
- 布林带收窄：波动率降低，可能酝酿大行情
- 布林带扩张：波动率增加，趋势可能加速

**计算公式：**
```
中轨 = MA(20)
标准差 = SQRT(SUM((收盘价 - MA(20))²) / 20)
上轨 = 中轨 + 2 × 标准差
下轨 = 中轨 - 2 × 标准差
```

### 5. KDJ指标 (Stochastic Oscillator)

KDJ是一个随机指标，通过比较收盘价与最高最低价的关系，判断超买超卖状态。

**组成部分：**
- **K值**：快速随机值
- **D值**：K值的平滑移动平均
- **J值**：3K - 2D

**参数设置：**
- 默认周期：9日
- 取值范围：0-100

**信号判断：**
- K > 80, D > 80：超买状态，卖出信号
- K < 20, D < 20：超卖状态，买入信号
- K线上穿D线：金叉，买入信号
- K线下穿D线：死叉，卖出信号

**计算公式：**
```
RSV = (收盘价 - 最低价) / (最高价 - 最低价) × 100
K = (2/3) × 前一日K值 + (1/3) × RSV
D = (2/3) × 前一日D值 + (1/3) × K值
J = 3K - 2D
```

## 图形模式识别

系统还支持经典的K线图形模式识别，包括：

### 蜡烛图模式 (Candlestick Patterns)

#### 1. 双响炮 (Double Cannon)
- **描述**：连续两根大阳线，成交量放大
- **信号**：强烈买入信号
- **识别条件**：
  - 第一根K线涨幅 > 2%
  - 第二根K线涨幅 > 3%
  - 第二根成交量是第一根的1.5倍以上

#### 2. 红三兵 (Red Three Soldiers)
- **描述**：连续三根上涨K线，稳步上涨
- **信号**：买入信号
- **识别条件**：
  - 三根K线都是阳线
  - 每根开盘价在前一根实体范围内
  - 平均涨幅 > 1.5%

#### 3. 乌云盖顶 (Dark Cloud Cover)
- **描述**：大阳线后跟大阴线，见顶信号
- **信号**：卖出信号
- **识别条件**：
  - 前一根涨幅 > 2%，当前跌幅 > 2%
  - 当前开盘价高于前一根最高价
  - 当前收盘价低于前一根实体中点

#### 4. 锤子线 (Hammer)
- **描述**：下影线很长的K线，见底信号
- **信号**：买入信号
- **识别条件**：
  - 下影线长度 > 实体长度的2倍
  - 上影线长度 < 实体长度的0.5倍

#### 5. 启明星 (Morning Star)
- **描述**：下跌趋势中的反转信号
- **信号**：买入信号
- **识别条件**：
  - 第一根：大阴线（跌幅 > 2%）
  - 第二根：小实体K线（实体 < 1%）
  - 第三根：大阳线（涨幅 > 2%）

#### 6. 黄昏星 (Evening Star)
- **描述**：上涨趋势中的反转信号
- **信号**：卖出信号
- **识别条件**：
  - 第一根：大阳线（涨幅 > 2%）
  - 第二根：小实体K线（实体 < 1%）
  - 第三根：大阴线（跌幅 > 2%）

### 量价图形 (Volume-Price Patterns)

#### 1. 量价齐升
- **描述**：价格和成交量同时上涨
- **信号**：强势买入信号
- **识别条件**：价格上涨且成交量增加

#### 2. 量价背离
- **描述**：价格与成交量走势相反
- **信号**：趋势可能反转
- **类型**：
  - 顶背离：价格上涨但成交量下降
  - 底背离：价格下跌但成交量上升

#### 3. 放量突破
- **描述**：价格突破重要阻力位，成交量放大
- **信号**：买入信号
- **识别条件**：
  - 价格突破20日均线
  - 成交量是20日平均成交量的2倍以上

## 技术指标的综合应用

### 多指标确认
系统支持多个技术指标的综合分析，通过不同指标的相互验证，提高信号的可靠性：

1. **趋势确认**：使用MA、MACD确认趋势方向
2. **超买超卖确认**：使用RSI、KDJ识别极端状态
3. **波动率分析**：使用布林带判断价格位置
4. **图形模式验证**：结合K线形态增强信号强度

### 信号强度评级
系统为每个识别的模式和信号提供强度评级：
- **STRONG（强）**：置信度 ≥ 80%
- **MEDIUM（中）**：置信度 60-79%
- **WEAK（弱）**：置信度 < 60%

### 风险等级评估
根据信号的综合分析结果，系统提供风险等级评估：
- **LOW（低风险）**：多个指标一致确认
- **MEDIUM（中风险）**：部分指标确认
- **HIGH（高风险）**：指标信号冲突或不明确

## API接口

### 获取技术指标
```
GET /api/stock/{stock_code}/indicators?start_date={start}&end_date={end}
```

### 获取图形模式识别结果
```
GET /api/pattern/recognize/{stock_code}?start_date={start}&end_date={end}
```

### 搜索特定图形模式
```
POST /api/pattern/search
{
  "ts_code": "000001.SZ",
  "start_date": "20240101",
  "end_date": "20241231",
  "patterns": ["双响炮", "红三兵"],
  "min_confidence": 70
}
```

## 使用建议

1. **组合使用**：不要依赖单一指标，建议组合多个指标进行分析
2. **趋势为王**：在明确的趋势中，技术指标的效果更佳
3. **量价配合**：关注成交量的配合，量价齐升的信号更可靠
4. **风险控制**：技术指标只是辅助工具，投资需要严格的风险控制
5. **市场环境**：不同的市场环境下，指标的有效性可能不同

## 注意事项

- 技术指标具有滞后性，不能预测未来，只能分析当前状态
- 市场异常波动时，技术指标可能失效
- 建议结合基本面分析，不要单纯依赖技术分析
- 系统提供的信号仅供参考，投资决策需要综合考虑多种因素
- 请根据自身风险承受能力合理使用技术指标

---

*本文档基于 Stock-A-Future v1.0 系统编写，技术指标的具体实现可能会随版本更新而调整。*
